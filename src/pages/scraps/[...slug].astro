---
// src/pages/scraps/[...slug].astro
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

// 動的ルーティングのためのパス生成
export async function getStaticPaths() {
  // scrapsコレクションから全投稿を取得
  const scraps = await getCollection('scraps');
  return scraps.map((scrap: Props) => ({
    params: { slug: scrap.slug },
    props: scrap,
  }));
}

// Propsの型定義（明示的にscrapsコレクションのエントリ型を使用）
type Props = CollectionEntry<'scraps'>;

const scrap = Astro.props;
const { Content } = await scrap.render();
---

<BaseLayout title={scrap.data.title}>
  <div class="scrap-container">
    <small>Scrap ID: {scrap.slug}</small>
    <h1>{scrap.data.title}</h1>
    <hr />
    <Content />
    
    </div>
</BaseLayout>